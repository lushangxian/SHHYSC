<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册</title>
    <link rel="stylesheet" href="../css/registr.css">
    <link rel="stylesheet" href="../font/iconfont.woff">
</head>

<body>
    <div class="header">
        <div class="top">
            <div class="login-top">
                <div class="login-box">
                    <a href="#"><img src="../img/4.png" alt=""></a>
                </div>
                <h3><em>欢迎注册</em></h3>
            </div>
        </div>
        <div class="zhuce">
            <div class="tu">
                <a href="#" class="f1 cur">
                    <em class="iconfont">&#xe640;</em>
                    <b>暂无会员卡</b>
                    <span><i class="iconfont">&#xe622;</i></span>
                </a>
                <a href="#" class="fr">
                    <em class="iconfont">&#xe63f;</em>
                    <b>已有会员卡</b>
                </a>
            </div>
            <div class="put">
                <form action="http://localhost/JS2002/SMHYSC/php/registry.php" method="post" class="form1">
                    <div class="p1">
                        <input type="text" placeholder="用户名" class="username ipt" id="username"
                            name="username"><span></span>
                        <p>4-20位字符，可由中文、英文、数字</p>
                    </div>
                    <div class="p1">
                        <input type="text" placeholder="邮箱地址" class="email ipt" id="email" name="email"><span></span>
                        <p>4-请输入常用邮箱，可用作登录账户，接受订单通知和找回密码之用</p>
                    </div>
                    <div class="p1">
                        <input type="password" placeholder="设置密码" class="password ipt" id="password"
                            name="password"><span></span>
                        <p>4-6-20位字符，可由大小写英文、数字或符号“-”“_”组成</p>
                    </div>
                    <div class="p1">
                        <input type="password" placeholder="确认密码" class="repass ipt" id="repass"
                            name="repass"><span></span>
                        <p>4-20位字符，可由中文、英文、数字</p>
                    </div>
                    <div class="p1"><input type="text" placeholder="您的手机号" class="shoujihao ipt" id="shoujihao"
                            name="shoujihao"><span></span>
                    </div>
                    <div class="p1" style="height: 38px;">
                        <input type="text" placeholder="验证码" class="yanzhengma ipt"
                            id="yanzhegma" name="yanzhengma" style="width: 290px;float: left;"><span class="s1"></span>
                    </div>
                    <div class="sp">
                        <input type="checkbox"><label for="#">&nbsp;订阅优惠信息</label>
                    </div>
                    <div class="sp">
                        <input type="checkbox"><label><a class="a1">《山姆会籍使用条款》</a>和<a class="a1">《隐私政策》</a></label>
                    </div>
                    <div class="btn">
                        <a href="">
                            <input type="submit" name="submit" id="" value="提交">
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="../js/ajax.js"></script>
    <script src="../js/registr.js"></script>
    <script>
         !function () {
            let username = document.querySelector('.username');
            let passworde=document.querySelector('.password');
            let span = document.querySelectorAll('span')[1];
            let form1 = document.querySelector('.form1');
            let user = true;
            username.onblur = function () {
                let reg = /^[a-zA-Z0-9_-]{4,16}$/;
                if (this.value != '') {
                    $ajax({
                        type: 'post',
                        url: 'http://localhost/JS2002/SMHYSC/php/registry.php',
                        data: {
                            username: username.value,//将数据传给后端
                            password: passworde.value,
                        },
                        success: function (data) {//后端反值 1存在 空为不存在
                            if (data) {
                                console.log(username.value)
                                span.innerHTML = '√';
                                span.style.color = 'grenn';
                                user = true;
                            } else {
                                span.innerHTML = '用户名已存在';
                                span.style.color = 'red';
                                user = false;
                            }
                        }
                    });
                } else {
                    alert('输入用户名');
                }
            }
            //console.log(form1);
            form1.onsubmit = function () {
                //判断用户名是否为空。
                if (shoujihao.value === '') {
                    alert('请输入用户名');
                    user = false;
                }
                if (!sjh) {
                    return false;
                }
            }
        }();
    </script>
</body>

</html>